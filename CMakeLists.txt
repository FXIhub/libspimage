PROJECT (spimage)

IF(WIN32)
	ADD_DEFINITIONS(-D_HDF5USEDLL_)
	ADD_DEFINITIONS( -D_CRT_SECURE_NO_DEPRECATE)
ENDIF(WIN32)
FIND_PATH (FFTW_INCLUDE_DIR fftw3.h PATHS /usr/include)
FIND_PATH (PNG_INCLUDE_DIR png.h PATHS /usr/include)
FIND_PATH (TIFF_INCLUDE_DIR tiff.h PATHS /usr/include)
FIND_PATH (HDF5_INCLUDE_DIR hdf5.h PATHS /usr/include)
FIND_LIBRARY (TIFF_LIBRARY tiff /usr/lib)
FIND_LIBRARY (PNG_LIBRARY png /usr/lib)
FIND_LIBRARY (FFTW3_LIBRARY fftw3 /usr/lib)
FIND_LIBRARY (HDF5_LIBRARY hdf5 /usr/lib)
INCLUDE_DIRECTORIES(${FFTW_INCLUDE_DIR} ${PNG_INCLUDE_DIR} ${TIFF_INCLUDE_DIR} ${HDF5_INCLUDE_DIR})

ADD_LIBRARY(spimage SHARED image_util.c fft.c)
INSTALL(TARGETS spimage
            RUNTIME DESTINATION /bin
            LIBRARY DESTINATION /lib
            ARCHIVE DESTINATION /lib/static)
TARGET_LINK_LIBRARIES(spimage ${TIFF_LIBRARY} ${FFTW3_LIBRARY} ${PNG_LIBRARY} ${HDF5_LIBRARY})
